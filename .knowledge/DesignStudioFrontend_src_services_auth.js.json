{"is_source_file": true, "format": "JavaScript", "description": "This file defines an authentication service with a bypass mode for testing. It provides functions for signing in, handling OAuth redirect callbacks, sign-out, and checking bypass mode status. The module manages internal user and token state and supports a mock user for development purposes.", "external_files": ["process.env"], "external_methods": ["encodeURIComponent", "window.location.assign", "searchParams.get"], "published": ["isBypassMode", "getUser", "getAccessToken", "signIn", "handleRedirectCallback", "signOut"], "classes": [], "methods": [{"name": "isBypassMode()", "description": "Returns whether bypass mode is enabled, allowing simulated login for testing.", "scope": "", "scopeKind": ""}, {"name": "getUser()", "description": "Returns the current user object, if any.", "scope": "", "scopeKind": ""}, {"name": "getAccessToken()", "description": "Returns the current access token, if any.", "scope": "", "scopeKind": ""}, {"name": "signIn()", "description": "Initiates sign-in process; in bypass mode, creates a mock user and token; otherwise, redirects to OAuth provider.", "scope": "", "scopeKind": ""}, {"name": "handleRedirectCallback(searchParams)", "description": "Handles OAuth redirect callback, in bypass mode does nothing, in real mode exchanges auth code for token and user info.", "scope": "", "scopeKind": ""}, {"name": "signOut()", "description": "Clears user and token data, performs sign-out logic including redirects if necessary.", "scope": "", "scopeKind": ""}], "calls": ["Promise.resolve", "window.location.assign", "searchParams.get"], "search-terms": ["auth bypass mode", "OAuth redirection", "mock user", "signIn function", "handleRedirectCallback"], "state": 2, "file_id": 14, "knowledge_revision": 81, "git_revision": "df8687e747780f0a1ef5e987742451cf445b9dc3", "revision_history": [{"29": ""}, {"81": "df8687e747780f0a1ef5e987742451cf445b9dc3"}], "ctags": [{"_type": "tag", "name": "BYPASS", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^const BYPASS = String(process.env.REACT_APP_BYPASS_AUTH).toLowerCase() === 'true';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "_token", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^let _token = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "_user", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^    _user = {$/", "language": "JavaScript", "kind": "class", "scope": "signIn", "scopeKind": "class"}, {"_type": "tag", "name": "_user", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^  _user = {$/", "language": "JavaScript", "kind": "class", "scope": "handleRedirectCallback", "scopeKind": "class"}, {"_type": "tag", "name": "_user", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^let _user = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^      email: 'test.user@designstudio.local',$/", "language": "JavaScript", "kind": "property", "scope": "signIn._user", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^    email: 'oauth.user@example.com',$/", "language": "JavaScript", "kind": "property", "scope": "handleRedirectCallback._user", "scopeKind": "class"}, {"_type": "tag", "name": "getAccessToken", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^export function getAccessToken() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getUser", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^export function getUser() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "handleRedirectCallback", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^export function handleRedirectCallback(searchParams) {$/", "language": "JavaScript", "kind": "function", "signature": "(searchParams)"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^      id: 'dev-user-1',$/", "language": "JavaScript", "kind": "property", "scope": "signIn._user", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^    id: 'user-1',$/", "language": "JavaScript", "kind": "property", "scope": "handleRedirectCallback._user", "scopeKind": "class"}, {"_type": "tag", "name": "isBypassMode", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^export function isBypassMode() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isMockUser", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^      isMockUser: true$/", "language": "JavaScript", "kind": "property", "scope": "signIn._user", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^      name: 'Test User (Mock)',$/", "language": "JavaScript", "kind": "property", "scope": "signIn._user", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^    name: 'OAuth User',$/", "language": "JavaScript", "kind": "property", "scope": "handleRedirectCallback._user", "scopeKind": "class"}, {"_type": "tag", "name": "roles", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^      roles: ['designer', 'admin', 'tester'],$/", "language": "JavaScript", "kind": "property", "scope": "signIn._user", "scopeKind": "class"}, {"_type": "tag", "name": "roles", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^    roles: ['designer']$/", "language": "JavaScript", "kind": "property", "scope": "handleRedirectCallback._user", "scopeKind": "class"}, {"_type": "tag", "name": "signIn", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^export function signIn() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "signOut", "path": "/home/kavia/workspace/code-generation/modelmapperv1-1604-2665/DesignStudioFrontend/src/services/auth.js", "pattern": "/^export function signOut() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}], "hash": "9a053ccf8e9bf0f7963eec5e0f266fc5", "format-version": 4, "code-base-name": "DesignStudioFrontend", "filename": "DesignStudioFrontend/src/services/auth.js", "fields": [{"name": "let _token = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let _user = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "email: 'test.user@designstudio.local',", "scope": "signIn._user", "scopeKind": "class", "description": "unavailable"}, {"name": "email: 'oauth.user@example.com',", "scope": "handleRedirectCallback._user", "scopeKind": "class", "description": "unavailable"}, {"name": "id: 'dev-user-1',", "scope": "signIn._user", "scopeKind": "class", "description": "unavailable"}, {"name": "id: 'user-1',", "scope": "handleRedirectCallback._user", "scopeKind": "class", "description": "unavailable"}, {"name": "isMockUser: true", "scope": "signIn._user", "scopeKind": "class", "description": "unavailable"}, {"name": "name: 'Test User (Mock)',", "scope": "signIn._user", "scopeKind": "class", "description": "unavailable"}, {"name": "name: 'OAuth User',", "scope": "handleRedirectCallback._user", "scopeKind": "class", "description": "unavailable"}, {"name": "roles: ['designer', 'admin', 'tester'],", "scope": "signIn._user", "scopeKind": "class", "description": "unavailable"}, {"name": "roles: ['designer']", "scope": "handleRedirectCallback._user", "scopeKind": "class", "description": "unavailable"}]}